{"version":3,"sources":["discord/ws/handlers/GUILD_MEMBER_LIST_UPDATE.ts"],"names":["onGuildMemberListUpdate","client","d","console","log","g","getGuild","guild_id","members","clear","op","ops","items","filter","i","map","member","forEach","m","cache","set","user","id","DiscordMember","updateMembers"],"mappings":"gHAAA,mEAKe,SAASA,EAAwBC,EAAuBC,GAsBnEC,QAAQC,IAAI,kBAEZ,IAAMC,EAAIJ,EAAOK,SAASJ,EAAEK,UAC5B,GAAKF,EAAL,CAEAA,EAAEG,QAAQC,QAEV,IAAMC,EAAKR,EAAES,IAAI,GACH,SAAVD,EAAGA,KAEPA,EAAGE,MAAOC,QAAO,SAAAC,GAAC,MAAI,WAAYA,KAAGC,KAAI,SAAAD,GAAC,OAAKA,EAAUE,UAA6BC,SAAQ,SAAAC,GAAC,OAAIb,EAAEG,QAAQW,MAAMC,IAAIF,EAAEG,KAAMC,GAAI,IAAIC,IAAclB,EAAGa,OAExJf,QAAQC,IAAIC,EAAEG,SAEdgB,YAAcnB,EAAEG","file":"static/js/4.f4a7c837.chunk.js","sourcesContent":["import { updateMembers } from \"../../../chat/MemberList\";\nimport { DiscordMember, DiscordMemberData } from \"../../classes/DiscordMember\";\nimport { DiscordRequestGuildMembers } from \"../../discord-classes\";\nimport { DiscordClient } from \"../../DiscordClient\";\n\nexport default function onGuildMemberListUpdate(client: DiscordClient, d: {\n    ops: {\n        range: [0, 99]\n        op: string\n        items?: ({\n            group: {\n                id: string\n                count: number\n            }\n        } | {\n            member: any\n        })[]\n    }[]\n    online_count: number\n    member_count: number\n    id: number\n    guild_id: string\n    groups: {\n        id: string\n        count: number\n    }[]\n}) {\n    console.log('Update members')\n\n    const g = client.getGuild(d.guild_id)\n    if (!g) return\n\n    g.members.clear()\n\n    const op = d.ops[0]\n    if (op.op !== 'SYNC') return\n    //g.members.push(...op.items!.filter(i => 'member' in i).map(i => (i as any).member))\n    op.items!.filter(i => 'member' in i).map(i => (i as any).member as DiscordMemberData).forEach(m => g.members.cache.set(m.user!.id, new DiscordMember(g, m)))\n\n    console.log(g.members)\n\n    updateMembers(g.members)\n\n    /*client.ws.send(8, {\n        guild_id: [d.guild_id],\n        user_ids: []\n    } as DiscordRequestGuildMembers)*/\n}"],"sourceRoot":""}