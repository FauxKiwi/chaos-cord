{"version":3,"sources":["discord/ws/handlers/VOICE_STATE_UPDATE.ts"],"names":["onMessageCreate","client","d","socket","user","id","user_id","console","log","channel_id","voiceSessionId","voiceServer","undefined","voiceWs","close","session_id","setVoiceState","state","connectVoice"],"mappings":"gHAAA,0DAGe,SAASA,EAAgBC,EAAuBC,EAI5DC,GAAoB,IAAD,EAClB,IAAI,UAAAF,EAAOG,YAAP,eAAaC,MAAOH,EAAEI,QAGtB,OAFAC,QAAQC,IAAI,2BACZD,QAAQC,IAAIN,GAIhB,GAAqB,OAAjBA,EAAEO,WAAN,CAK4B,IAAD,EAA3B,GAAIR,EAAOS,eACPT,EAAOU,iBAAcC,EACrB,UAAAX,EAAOY,eAAP,SAAgBC,QAGpBb,EAAOS,eAAiBR,EAAEa,WAEtBd,EAAOU,aACPK,YAAc,CAAEC,MAAO,SACvBhB,EAAOiB,gBAEPF,YAAc,CAAEC,MAAO,eAfvBV,QAAQC,IAAR,8BAAmCN,EAAEa","file":"static/js/8.1f7d771c.chunk.js","sourcesContent":["import { setVoiceState } from \"../../../App\";\nimport { DiscordClient } from \"../../DiscordClient\";\n\nexport default function onMessageCreate(client: DiscordClient, d: {\n    user_id: string\n    session_id: string\n    channel_id: string | null\n}, socket: WebSocket) {\n    if (client.user?.id !== d.user_id) {\n        console.log('Voice State Update')\n        console.log(d)\n        return\n    }\n    \n    if (d.channel_id === null) {\n        console.log(`Ended voice session ${d.session_id}`)\n        return\n    }\n\n    if (client.voiceSessionId) {\n        client.voiceServer = undefined\n        client.voiceWs?.close()\n    }\n\n    client.voiceSessionId = d.session_id\n\n    if (client.voiceServer) {\n        setVoiceState({ state: 'BOTH' })\n        client.connectVoice()\n    } else {\n        setVoiceState({ state: 'STATE' })\n    }\n}"],"sourceRoot":""}